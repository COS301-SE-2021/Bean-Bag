@model AIModel
   <!-- Filepond stylesheet -->
    <link href="https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.min.css" rel="stylesheet" />
    <link href="https://unpkg.com/filepond/dist/filepond.min.css" rel="stylesheet">
    <link href="https://unpkg.com/filepond-plugin-file-poster/dist/filepond-plugin-file-poster.css" rel="stylesheet">

<section class="page-content">
    
    <section class="search-and-user">
        <span class="col-md-2 text-secondary ">
            Create Model
        </span>
        <hr>
    </section>

    <div class="dashboard-wrapper">
        <div class="container-fluid  dashboard-content">
           
            <hr>
            
            <div class="card shadow mb-3 bg-body rounded">
                <h5 class="card-header">Create Model </h5>
                <form method="post" id="form2" class="form-horizontal form-label-left" enctype="multipart/form-data" data-parsley-validate asp-action="UploadTestImages" asp-controller="AiModel">
                    <div asp-validation-summary="All" class="text-danger"></div>
                    <div class="card-body p-0 row">
                        <div class="col-sm-8">
                            <div class="form-group">
                                <input hidden value="@Context.Request.Query["projectId"]" name="projectId"/>
                                
                                <div>
                                    <br>
                                    <!--Upload Section-->
                                    <h5 class="text-muted pl-4">Upload</h5>
                                    <div class="text-secondary pl-4 pt-3"> <i class="fas fa-exclamation-circle"></i> &nbsp;Allowed file extensions:<b> .jpg, .jpeg, .png. </b></div>
                                    <div class="text-secondary pl-4 pt-1"> <i class="fas fa-exclamation-circle"></i> &nbsp;Upload 5 images or more </div>
                                    
                                </div>
                                
                                <label class="control-label col-md-2" >
                                    <span class="required"></span>
                                </label>

                                
                                <div class="p-3 pr-3">
                                    <input hidden value="@Context.Request.Query["projectId"]" name="projectId"/> 
                                    <input type="file" id="fileupload" class="filepond" name="files" multiple="multiple" data-max-files="1000">
                                </div>
                                
                            </div>
                        </div>

                        <!--Model details and tag section-->
                        <div class="col-sm-4 ">
                            <div class="pt-4">
                                <!--Model details-->
                                <h5 class="text-muted pl-3">Model Details</h5>
                                <div class="pl-3 pt-2">
                                    <div> Model ID: &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;@ViewBag.ID </div>
                                    <div> Model Name: &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; @ViewBag.Name</div>
                                    <div> Model Description: &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; @ViewBag.Description </div>
                                </div>
                                <hr>
                            </div>
                            <!--Tags-->
                            <h5 class="text-muted pt-4 pl-3">Add tags</h5>
                            <div class="text-secondary pt-3 pb-3 pl-3"> <i class="fas fa-exclamation-circle"></i> Add tags to the images of the model </div>
                            
                            <div class="container pt-3">
                                <div class="row clearfix">
                                    <div class="col-md-12 column">
                                        <table class="table table-bordered table-hover pr-5" id="tab_logic">
                                            <thead>
                                            <tr>
                                                <th >#</th>
                                                <th >Tag Name</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr id="address0">
                                                <td>1</td>
                                                <td><input type="text" name='tags' placeholder='Name' class="form-control"/></td>
                                            </tr>
                                            
                                            <tr id="address1"></tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <a id="add_row" class="btn btn-3 pull-left ">Add &nbsp; <i class="fa fa-plus" aria-hidden="true"></i></a>
                                <a id='delete_row' class="pull-right btn btn-3 ">Remove &nbsp; <i class="fa fa-ban" aria-hidden="true"></i></a>
                                <div class=" pl-4 form-check-inline form-group row ">
                                    <label class="form-check-label">Done &nbsp;</label>
                                    <input class="form-check-input" name="LastTestImages" type="checkbox">
                                </div>
                            </div>
                        </div>
                        
                    </div>
                    
                    <div class="pt-4">
                        &nbsp;
                    </div>
                    <div class="modal-footer">

                        <a asp-controller="AiModel" asp-route-projectId="@ViewBag.ID" asp-action="ModelVersions" class="btn btn-secondary">Cancel</a>
                        <input type="submit" class="btn btn-3" value="Upload" /> <!--create button-->
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

@* This script functions is used to add dynamic text boxes to allow the user to enter as many tags as
 they desire with the uploaded test images *@

<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<script>
       $(document).ready(function(){  
        let i=1;
       $("#add_row").click(function(){
        $('#address'+i).html("<td>"+ (i+1) +"</td><td><input name='tags' type='text' placeholder='Name' class='form-control input-md'  /> " 
         );
        
        $('#tab_logic').append('<tr id="address'+(i+1)+'"></tr>');
        i++; 
       });
       $("#delete_row").click(function(){
      	 if(i>1){
  		 $("#address"+(i-1)).html('');
  		 i--;
  		 }
  	 });
  });   
</script>

<!-- Filepond scripts -->
<script src="https://unpkg.com/filepond-plugin-file-encode/dist/filepond-plugin-file-encode.min.js"></script>
<script src="https://unpkg.com/filepond-plugin-file-validate-size/dist/filepond-plugin-file-validate-size.min.js"></script>
<script src="https://unpkg.com/filepond-plugin-image-exif-orientation/dist/filepond-plugin-image-exif-orientation.min.js"></script>
<script src="https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.min.js"></script>
<script src="https://unpkg.com/filepond/dist/filepond.min.js"></script>
<script>
    FilePond.registerPlugin(
    // encodes the file as base64 data
    FilePondPluginFileEncode,
    // validates the size of the file
    FilePondPluginFileValidateSize,
    // corrects mobile image orientation
    FilePondPluginImageExifOrientation,
    // previews dropped images
    FilePondPluginImagePreview
    );
    // Select the file input and use create() to turn it into a pond
    /*FilePond.create( document.querySelector('.filepond'));*/
</script>
<script>
// Select the file input and use create() to turn it into a pond
const inputElement = document.querySelector('input[type="file"]');
const pond = FilePond.create( inputElement );
</script>
<script>
FilePond.setOptions({
server: '@Url.Action("SaveFile", "AiModel")'
});
</script>
 